year <- "\\2007\\correlation\\correlation\\"
rfilename <- paste(maindir, year, "correlation.csv", sep = "", collapse = NULL)
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
len <- length(timespan)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
if (i == 1) {
rfilename <- paste(maindir, year, "correlation", timespan[i], ".csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary", timespan[i], ".csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid", timespan[i], ".png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
} else {
rfilename <- paste(maindir, year, "correlation_", timespan[i], "_.csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary_span_", timespan[i], "_.csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid_span_", timespan[i], "_.png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask_span_", timespan[i], "_.png", sep = "")
}
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (i in 2:c) {
Mean <- mean(data[,i])
SD <- sd(data[,i])
Median <- median(data[,i])
Kurtosis <- mean((data[,i] - Mean)^4)/(SD^4)
Skewness <- mean((data[,i] - Mean)^3)/(SD^3)
line <- paste(colnames(data[i]), Mean, SD, Median, Kurtosis, Skewness, min(data[,i]), max(data[,i]))
summary[i-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,i]), max(data[,i]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
#相関係数のヒストグラムを作成する．
png(pngnamebid)
hist(data[,2], n=25,
main = "histgram of the correlation of the series of the best bid price changes",
xlab = "")
dev.off()
png(pngnameask)
hist(data[,3], n=25,
main = "histgram of the correlation of the series of the best ask price changes",
xlab = "")
dev.off()
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
rfilename <- paste(maindir, year, "datasize_bid.csv", sep = "", collapse = NULL)
data <- read.csv(rfilename, sep=",", header = T)
data
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasise_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], ".csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[,2], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasise_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[,2], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasize_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[,2], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasize_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[,j], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasize_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c - 1) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[, j], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\correlation\\"
rfilename <- paste(maindir, year, "correlation.csv", sep = "", collapse = NULL)
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
len <- length(timespan)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
if (i == 1) {
rfilename <- paste(maindir, year, "correlation", timespan[i], ".csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary", timespan[i], ".csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid", timespan[i], ".png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
} else {
rfilename <- paste(maindir, year, "correlation_", timespan[i], "_.csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary_span_", timespan[i], "_.csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid_span_", timespan[i], "_.png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask_span_", timespan[i], "_.png", sep = "")
}
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
line <- paste(colnames(data[j]), Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
#相関係数のヒストグラムを作成する．
png(pngnamebid)
hist(data[,2], n=25,
main = "histgram of the correlation of the series of the best bid price changes",
xlab = "")
dev.off()
png(pngnameask)
hist(data[,3], n=25,
main = "histgram of the correlation of the series of the best ask price changes",
xlab = "")
dev.off()
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\correlation\\"
rfilename <- paste(maindir, year, "correlation.csv", sep = "", collapse = NULL)
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
len <- length(timespan)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
if (i == 1) {
rfilename <- paste(maindir, year, "correlation", timespan[i], ".csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary", timespan[i], ".csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid", timespan[i], ".png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
} else {
rfilename <- paste(maindir, year, "correlation_", timespan[i], "_.csv", sep = "")
wfilename <- paste(maindir, year, "statistics_summary_span_", timespan[i], "_.csv", sep = "")
pngnamebid <- paste(maindir, year, "hist_bid_span_", timespan[i], "_.png", sep = "")
pngnameask <- paste(maindir, year, "hist_ask_span_", timespan[i], "_.png", sep = "")
}
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j], na.rm = TRUE)
SD <- sd(data[,j], na.rm = TRUE)
Median <- median(data[,j], na.rm = TRUE)
Kurtosis <- mean((data[,j] - Mean)^4, na.rm = TRUE)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3, na.rm = TRUE)/(SD^3)
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j], na.rm = TRUE), max(data[,j], na.rm = TRUE))
}
write.csv(summary, wfilename, quote = F, row.names = T)
#相関係数のヒストグラムを作成する．
png(pngnamebid)
hist(data[,2], n=25,
main = "histgram of the correlation of the series of the best bid price changes",
xlab = "")
dev.off()
png(pngnameask)
hist(data[,3], n=25,
main = "histgram of the correlation of the series of the best ask price changes",
xlab = "")
dev.off()
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
year <- "\\2007\\correlation\\time_span\\"
timespan <- c( "", "1", "2", "5", "15", "30", "60", "120", "300" )
filename <- c( "datasize_bid.csv", "datasize_ask.csv" )
len <- length(filename)
for (i in 1:len) {
#読み込むファイル，書き込むファイルの名前を設定する．
rfilename <- paste(maindir, year, filename[i], sep = "")
wfilename <- paste(maindir, year, "statistics_summary_", filename[i], ".csv", sep = "")
pngname <- paste(maindir, year, "hist_", filename[i], sep = "")
pngnameask <- paste(maindir, year, "hist_ask", timespan[i], ".png", sep = "")
data <- read.csv(rfilename, sep=",", header = T)
#基本統計量をファイルに書き出す．
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7) #結果書き出し用の行列
colnames(summary) <- c("Mean", "S.D.", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (j in 2:c) {
Mean <- mean(data[,j], na.rm = TRUE)
SD <- sd(data[,j], na.rm = TRUE)
Median <- median(data[,j], na.rm = TRUE)
Kurtosis <- mean((data[,j] - Mean)^4, na.rm = TRUE)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3, na.rm = TRUE)/(SD^3)
summary[j-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j], na.rm = TRUE), max(data[,j], na.rm = TRUE))
#ヒストグラムを作成する．
pngname <- paste(maindir, year, "hist_", filename[i], timespan[j], ".png", sep = "")
png(pngname)
hist(data[, j], n=25,
main = paste("histgram of the size of data of timespan", timespan[j], sep = "_"),
xlab = "")
dev.off()
}
write.csv(summary, wfilename, quote = F, row.names = T)
}
#最後に板が上がった直後の数量，最後に板が下がった直後の数量のヒストグラムを作成する．
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
currentdir <- "\\statistics_of_the_limit_order_book\\initial_depth"
datayear <- "\\2006\\"
tails <- c( "after_up_", "after_down_" )
for (tail in tails) {
filename <- paste(maindir, currentdir, datayear, tail, ".csv", sep = "", collapse = NULL)
wfilename <- paste(maindir, currentdir, datayear, "statistics_summary_", tail, ".csv", sep = "", collapse = NULL)
data <- read.csv(filename, sep=",", header = T)
cols <- c( 7, 9 )
summary <- matrix(0, nrow = 2, ncol = 7)
colnames(summary) <- c("Mean", "S.D", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- c( colnames(data)[7], colnames(data)[9] )
for (k in 1:2) {
j <- cols[k]
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
summary[k,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
pngname <- paste(maindir, currentdir, datayear, tail, ".png", sep = "", collapse = NULL)
png(pngname)
x <- max( c( max(data[,7]), max(data[,9]) ) )
y <- nrow(data)
hist(data[, 7], n=25,
main = paste("the_histgram_of_", tail, "depths", sep = "", collapse = NULL),
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#b2222220")
par(new = T)
hist(data[, 9], n=25,
main = "",
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#00bfff20")
legend("topright", legend = c( "bid depth", "ask depth"), pch = c(19, 19),
col = c( "#b2222220", "#00bfff20" ))
dev.off()
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
currentdir <- "\\statistics_of_the_limit_order_book\\initial_depth"
datayear <- "\\2009\\"
tails <- c( "after_up_", "after_down_" )
for (tail in tails) {
filename <- paste(maindir, currentdir, datayear, tail, ".csv", sep = "", collapse = NULL)
wfilename <- paste(maindir, currentdir, datayear, "statistics_summary_", tail, ".csv", sep = "", collapse = NULL)
data <- read.csv(filename, sep=",", header = T)
cols <- c( 7, 9 )
summary <- matrix(0, nrow = 2, ncol = 7)
colnames(summary) <- c("Mean", "S.D", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- c( colnames(data)[7], colnames(data)[9] )
for (k in 1:2) {
j <- cols[k]
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
summary[k,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
pngname <- paste(maindir, currentdir, datayear, tail, ".png", sep = "", collapse = NULL)
png(pngname)
x <- max( c( max(data[,7]), max(data[,9]) ) )
y <- nrow(data)
hist(data[, 7], n=25,
main = paste("the_histgram_of_", tail, "depths", sep = "", collapse = NULL),
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#b2222220")
par(new = T)
hist(data[, 9], n=25,
main = "",
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#00bfff20")
legend("topright", legend = c( "bid depth", "ask depth"), pch = c(19, 19),
col = c( "#b2222220", "#00bfff20" ))
dev.off()
}
#最後に板が上がった直後の数量，最後に板が下がった直後の数量のヒストグラムを作成する．
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
currentdir <- "\\statistics_of_the_limit_order_book\\initial_depth"
datayear <- "\\2007\\"
tails <- c( "after_up_", "after_down_" )
for (tail in tails) {
filename <- paste(maindir, currentdir, datayear, tail, ".csv", sep = "", collapse = NULL)
wfilename <- paste(maindir, currentdir, datayear, "statistics_summary_", tail, ".csv", sep = "", collapse = NULL)
data <- read.csv(filename, sep=",", header = T)
cols <- c( 7, 9 )
summary <- matrix(0, nrow = 2, ncol = 7)
colnames(summary) <- c("Mean", "S.D", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- c( colnames(data)[7], colnames(data)[9] )
for (k in 1:2) {
j <- cols[k]
Mean <- mean(data[,j])
SD <- sd(data[,j])
Median <- median(data[,j])
Kurtosis <- mean((data[,j] - Mean)^4)/(SD^4)
Skewness <- mean((data[,j] - Mean)^3)/(SD^3)
summary[k,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,j]), max(data[,j]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
pngname <- paste(maindir, currentdir, datayear, tail, ".png", sep = "", collapse = NULL)
png(pngname)
x <- max( c( max(data[,7]), max(data[,9]) ) )
y <- nrow(data)
hist(data[, 7], n=25,
main = paste("the_histgram_of_", tail, "depths", sep = "", collapse = NULL),
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#b2222220")
par(new = T)
hist(data[, 9], n=25,
main = "",
xlab = "", ylab = "",
xlim = c(0, x), ylim = c(0, y), col = "#00bfff20")
legend("topright", legend = c( "bid depth", "ask depth"), pch = c(19, 19),
col = c( "#b2222220", "#00bfff20" ))
dev.off()
}
maindir <- "C:\\Users\\kklab\\Desktop\\yurispace\\board_fluctuation\\src\\nikkei_needs_output"
currentdir <- "\\statistics_of_the_limit_order_book\\reference\\"
rfilename <- paste(maindir, currentdir, "reference_test.csv", sep = "", collapse = NULL)
wfilename <- paste(maindir, currentdir, "statistics_summary.csv", sep = "", collapse = NULL)
data <- read.csv(rfilename, sep=",", header = T)
c <- ncol(data)
r <- nrow(data)
summary <- matrix(0, nrow = c-1, ncol = 7)
colnames(summary) <- c("Mean", "S.D", "Median", "Kurtosis", "Skewness", "Minimum", "Maximum")
rownames(summary) <- colnames(data)[2:c]
for (i in 2:c) {
Mean <- mean(data[,i])
SD <- sd(data[,i])
Median <- median(data[,i])
Kurtosis <- mean((data[,i] - Mean)^4)/(SD^4)
Skewness <- mean((data[,i] - Mean)^3)/(SD^3)
line <- paste(colnames(data[i]), Mean, SD, Median, Kurtosis, Skewness, min(data[,i]), max(data[,i]))
summary[i-1,] <- c(Mean, SD, Median, Kurtosis, Skewness, min(data[,i]), max(data[,i]))
}
write.csv(summary, wfilename, quote = F, row.names = T)
pngnames <- c( "Arrival_Frequency_of_Market_Buy_Orders", "Arrival_Frequency_of_Market_Sell_Orders",
"Arrival_Frequency_of_Limit_Buy_Orders", "Arrival_Frequency_of_Limit_Sell_Orders",
"Average_Pieces_of_One_Market_Buy_Order", "Average_Pieces_of_One_Market_Sell_Order",
"Average_Pieces_of_One_Limit_Buy_Order", "Average_Pieces_of_One_Limit_Sell_Order",
"Upmovement_Times_of_the_Best_Bid", "Downmovement_Times_of_the_Best_Bid",
"Upmovement_Times_of_the_Best_Ask", "Downmovement_Times_of_the_Best_Ask" )
for (i in 1:length(pngnames)) {
pngname <- paste(maindir, currentdir, pngnames[i], ".png", sep = "", collapse = NULL)
png(pngname)
hist(data[, i + 1], n=25,
main = pngnames[i],
xlab = "")
dev.off()
}
